# Modern Bot

–≠—Ç–æ —É–ª—É—á—à–µ–Ω–Ω–∞—è –∏ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–ª—é—á–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—é—â–∞—è —Ä–µ–∂–∏–º –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Mini App).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ß–∏—Å—Ç—ã–π –∫–æ–¥, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤ –ø–∞–ø–∫–µ `modern_bot/`.
- **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: –£–¥–æ–±–Ω—ã–π –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Telegram Mini App —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –æ—à–∏–±–æ–∫.
- **–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ª—é–±–æ–º –±—Ä–∞—É–∑–µ—Ä–µ (Chrome, Safari) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ Telegram.
- **–†–∞—Å—Å—ã–ª–∫–∞**: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.
- **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã**: –£—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∞—Ä—Ö–∏–≤–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

### Production-Ready Features
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤ –≤ `logs/bot_YYYY-MM-DD.log` —Å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π (—Ö—Ä–∞–Ω–µ–Ω–∏–µ 7 –¥–Ω–µ–π).
- **–ê–≤—Ç–æ–±—ç–∫–∞–ø—ã**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î –∏ persistence –≤ `backups/` (—Ö—Ä–∞–Ω–µ–Ω–∏–µ 7 –¥–Ω–µ–π).
- **Persistence**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–∏–∞–ª–æ–≥–æ–≤ –Ω–∞ –¥–∏—Å–∫ ‚Äî –±–æ—Ç –Ω–µ —Ç–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ.
- **–ê—Ä—Ö–∏–≤–Ω–∞—è —Ä–µ—Ç–µ–Ω—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–π —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π.
- **Healthcheck API**: –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /health` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞.
- **–°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ö–Ω–æ–ø–∫–∞ "üñ•Ô∏è –°–∏—Å—Ç–µ–º–∞" –≤ –∞–¥–º–∏–Ω–∫–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏—Å–∫–∞, –ë–î, –∞—Ä—Ö–∏–≤–∞.

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å
1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (`/Users/oleg/Project_SKLAD`).
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
    ```bash
    python3 run_modern_bot.py
    ```
3.  **–î–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—É–Ω–Ω–µ–ª—å ngrok:
    ```bash
    ./start_tunnel.sh
    ```
    *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: URL –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `index.html` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å ngrok. –ï—Å–ª–∏ –≤–∞—à URL —Ç—É–Ω–Ω–µ–ª—è –∏–∑–º–µ–Ω–∏—Ç—Å—è, –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –µ–≥–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.*

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
1.  –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ª–µ–∂–∏—Ç –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (`web_app/index.html`). –ö–æ–ø–∏—è –≤ `modern_bot/web_app/` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–∞—è.
2.  –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª `web_app/index.html` –Ω–∞ –ø—É–±–ª–∏—á–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, GitHub Pages).
3.  **–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –¥–æ—Å—Ç—É–ø**: –û—Ç–∫—Ä–æ–π—Ç–µ URL GitHub Pages –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
    - –ï—Å–ª–∏ "URL –±–æ—Ç–∞" –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤–∞–º –≤–≤–µ—Å—Ç–∏ –µ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∞—à URL ngrok).
    - **–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–ù–æ–≤–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ" 5 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä—É—á–Ω—É—é.

## –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `/add_admin <ID>`
- `/broadcast <–°–æ–æ–±—â–µ–Ω–∏–µ>`
- `/download_month <–ú–ú.–ì–ì–ì–ì>`
- `/stats`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ—Ç–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```mermaid
sequenceDiagram
    actor "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" as User
    participant "–ó–∞–≥–æ–ª–æ–≤–æ–∫" as MainTitle
    participant "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫" as SettingsModal
    participant "–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" as LocalStorage
    participant "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" as AppConfig

    "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"->>"–ó–∞–≥–æ–ª–æ–≤–æ–∫": "–ö–ª–∏–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É (x5)"
    "–ó–∞–≥–æ–ª–æ–≤–æ–∫"->>"–ó–∞–≥–æ–ª–æ–≤–æ–∫": "–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∫–ª–∏–∫–æ–≤"
    "–ó–∞–≥–æ–ª–æ–≤–æ–∫"-->>"–ó–∞–≥–æ–ª–æ–≤–æ–∫": "–ö–ª–∏–∫–æ–≤ >= 5?"
    alt "–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ 5 –∫–ª–∏–∫–æ–≤"
        "–ó–∞–≥–æ–ª–æ–≤–æ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "–ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ": "–ß—Ç–µ–Ω–∏–µ 'imgbb_key' –∏ 'bot_url' (—É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 'apiKeyInput.value' = imgbbKey"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 'botUrlInput.value' = botUrl"
        "–ó–∞–≥–æ–ª–æ–≤–æ–∫"->>"–ó–∞–≥–æ–ª–æ–≤–æ–∫": "–°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –∫–ª–∏–∫–æ–≤ –≤ 0"
    end

    "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ ImgBB –∏ URL –±–æ—Ç–∞"
    "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'"
    "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "saveSettings() —á–∏—Ç–∞–µ—Ç apiKeyInput, botUrlInput"

    alt "–ö–ª—é—á ImgBB –Ω–µ –ø—É—Å—Ç–æ–π"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 'imgbb_key' = –∫–ª—é—á"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "imgbbKey = –∫–ª—é—á"
    else "–ö–ª—é—á ImgBB –ø—É—Å—Ç–æ–π"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ": "–£–¥–∞–ª–∏—Ç—å 'imgbb_key'"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è": "–ß—Ç–µ–Ω–∏–µ DEFAULT_IMGBB_KEY"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "imgbbKey = APP_CONFIG.DEFAULT_IMGBB_KEY"
    end

    alt "–í–≤–æ–¥ URL –±–æ—Ç–∞ –Ω–µ –ø—É—Å—Ç–æ–π"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "cleanUrl = url –±–µ–∑ —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 'bot_url' = cleanUrl"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "botUrl = cleanUrl"
    else "–í–≤–æ–¥ URL –±–æ—Ç–∞ –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ": "–£–¥–∞–ª–∏—Ç—å 'bot_url'"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è": "–ß—Ç–µ–Ω–∏–µ DEFAULT_BOT_URL"
        "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "botUrl = APP_CONFIG.DEFAULT_BOT_URL"
    end

    "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "–°–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"
```

### –ü–æ—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
```mermaid
sequenceDiagram
    actor "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" as User
    participant "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞" as MainForm
    participant "Telegram WebApp" as Telegram
    participant "–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫" as SettingsModal
    participant "–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" as LocalStorage
    participant "–ë—ç–∫–µ–Ω–¥ –±–æ—Ç–∞" as BotBackend

    "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–ö–ª–∏–∫ '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å'"
    "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "showPreview() –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–∞ –¥–∞–Ω–Ω—ã—Ö"

    "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏"
    "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏, —Ç–µ–∫—Å—Ç '–û—Ç–ø—Ä–∞–≤–∫–∞...'"

    "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"Telegram": "–ü—Ä–æ–≤–µ—Ä–∫–∞ tg.initDataUnsafe –∏ tg.initDataUnsafe.user"
    alt "–ó–∞–ø—É—â–µ–Ω–æ –≤–Ω—É—Ç—Ä–∏ Telegram"
        "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"Telegram": "tg.sendData(JSON.stringify(data))"
        "Telegram"-->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–û—Ç–ø—Ä–∞–≤–∫–∞ –±–æ—Ç—É —á–µ—Ä–µ–∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É Telegram"
        "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–í–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏"
    else "–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ"
        "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è botUrl"
        alt "botUrl –ø—É—Å—Ç–æ–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
            "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫": "–ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"
            "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"Telegram": "tg.showAlert('–ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å URL –±–æ—Ç–∞...')"
            "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–í–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏, —Ç–µ–∫—Å—Ç '–û—Ç–ø—Ä–∞–≤–∏—Ç—å'"
        else "botUrl –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
            "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ë—ç–∫–µ–Ω–¥ –±–æ—Ç–∞": "–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ botUrl (HTTP –∑–∞–ø—Ä–æ—Å)"
            "–ë—ç–∫–µ–Ω–¥ –±–æ—Ç–∞"-->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–û—Ç–≤–µ—Ç —Å —É—Å–ø–µ—Ö–æ–º –∏–ª–∏ –æ—à–∏–±–∫–æ–π"
            "–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞"->>"–ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞": "–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞, –≤–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏"
        end
    end
```

### –õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```mermaid
flowchart TD
    A_Start["–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"]
    A_Start-->A_LoadImgBB["–ó–∞–≥—Ä—É–∑–∫–∞ 'imgbb_key' –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞"]
    A_LoadImgBB-->A_ImgBBExists{"'imgbb_key' —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?"}
    A_ImgBBExists-->|"–î–∞"|A_SetImgBBFromStorage["–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å imgbbKey = —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"]
    A_ImgBBExists-->|"–ù–µ—Ç"|A_SetImgBBDefault["–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å imgbbKey = APP_CONFIG.DEFAULT_IMGBB_KEY"]

    A_SetImgBBFromStorage-->A_LoadBotUrl["–ó–∞–≥—Ä—É–∑–∫–∞ 'bot_url' –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞"]
    A_SetImgBBDefault-->A_LoadBotUrl
    A_LoadBotUrl-->A_BotUrlExists{"'bot_url' —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?"}
    A_BotUrlExists-->|"–î–∞"|A_SetBotUrlFromStorage["–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å botUrl = —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"]
    A_BotUrlExists-->|"–ù–µ—Ç"|A_SetBotUrlDefault["–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å botUrl = APP_CONFIG.DEFAULT_BOT_URL"]

    A_SetBotUrlFromStorage-->A_Wait["–û–∂–∏–¥–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"]
    A_SetBotUrlDefault-->A_Wait

    subgraph B_Settings_Modal_Open ["B_–û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫"]
        B_Open["–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É 5 —Ä–∞–∑"]-->B_ShowModal["–ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"]
        B_ShowModal-->B_Prefill["–ó–∞–ø–æ–ª–Ω–∏—Ç—å apiKeyInput = imgbbKey, botUrlInput = botUrl"]
    end

    A_Wait-->B_Open

    subgraph C_Save_Settings ["C_–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫"]
        C_UserSave["–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'"]-->C_ReadInputs["–ß—Ç–µ–Ω–∏–µ apiKeyInput –∏ botUrlInput"]
        C_ReadInputs-->C_ImgBBNonEmpty{"–ö–ª—é—á ImgBB –Ω–µ –ø—É—Å—Ç–æ–π?"}
        C_ImgBBNonEmpty-->|"–î–∞"|C_SaveImgBB["–°–æ—Ö—Ä–∞–Ω–∏—Ç—å 'imgbb_key' –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å imgbbKey = –∫–ª—é—á"]
        C_ImgBBNonEmpty-->|"–ù–µ—Ç"|C_ResetImgBB["–£–¥–∞–ª–∏—Ç—å 'imgbb_key'; —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å imgbbKey = APP_CONFIG.DEFAULT_IMGBB_KEY"]

        C_SaveImgBB-->C_BotUrlNonEmpty{"URL –±–æ—Ç–∞ –Ω–µ –ø—É—Å—Ç–æ–π?"}
        C_ResetImgBB-->C_BotUrlNonEmpty
        C_BotUrlNonEmpty-->|"–î–∞"|C_CleanAndSaveUrl["–£–¥–∞–ª–∏—Ç—å —Å–ª–µ—à –≤ –∫–æ–Ω—Ü–µ; —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å 'bot_url'; —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å botUrl = cleanUrl"]
        C_BotUrlNonEmpty-->|"–ù–µ—Ç"|C_ResetBotUrl["–£–¥–∞–ª–∏—Ç—å 'bot_url'; —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å botUrl = APP_CONFIG.DEFAULT_BOT_URL"]

        C_CleanAndSaveUrl-->C_CloseModal["–°–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫"]
        C_ResetBotUrl-->C_CloseModal
    end

    B_Prefill-->C_UserSave
    C_CloseModal-->A_Wait
```
